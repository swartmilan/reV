

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Batched Execution &mdash; reV 0.4.33 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SAM Single Owner Modeling" href="examples.advanced_econ_modeling.html" />
    <link rel="prev" title="Full Pipeline Execution" href="examples.full_pipeline_execution.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> reV
          

          
          </a>

          
            
            
              <div class="version">
                0.4.33
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="misc.html">Installation and Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#option-1-install-from-pip-or-conda-recommended-for-analysts">Option 1: Install from PIP or Conda (recommended for analysts):</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#option-2-clone-repo-recommended-for-developers">Option 2: Clone repo (recommended for developers)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#usage-on-eagle">Usage on Eagle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#launching-a-run">Launching a run</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#general-run-times-and-node-configuration-on-eagle">General Run times and Node configuration on Eagle</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#command-line-tools">Command Line Tools</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="misc.html#examples">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="examples.project_points.html">reV Project Points</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples.project_points.html#command-line-interface-cli">Command Line Interface (CLI)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="examples.running_locally.html">Run reV locally</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples.running_locally.html#id1">reV Gen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="examples.running_locally.html#windpower">windpower</a></li>
<li class="toctree-l4"><a class="reference internal" href="examples.running_locally.html#pvwatts">pvwatts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="examples.running_locally.html#command-line-interface-cli">Command Line Interface (CLI)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="examples.running_locally.html#id3">windpower</a></li>
<li class="toctree-l4"><a class="reference internal" href="examples.running_locally.html#id4">pvwatts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="examples.single_module_execution.html">Single Module Execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.full_pipeline_execution.html">Full Pipeline Execution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples.full_pipeline_execution.html#pipeline-input-requirements">Pipeline Input Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples.full_pipeline_execution.html#failed-jobs">Failed Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples.full_pipeline_execution.html#file-inputs">File Inputs</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Batched Execution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#batching-config-description">Batching Config Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-run">How to Run</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="examples.advanced_econ_modeling.html">SAM Single Owner Modeling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples.advanced_econ_modeling.html#workflow-description">Workflow Description</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="examples.offshore_wind.html">Offshore Wind Modeling</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples.offshore_wind.html#rev-offshore-module-description">reV Offshore Module Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples.offshore_wind.html#treatment-of-offshore-points-in-supply-curve">Treatment of Offshore Points in Supply Curve</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="examples.eagle_node_requests.html">Eagle Node Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.running_with_hsds.html">Running with HSDS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples.running_with_hsds.html#setting-up-hsds">Setting up HSDS</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples.running_with_hsds.html#using-hsds-with-rev">Using HSDS with reV</a></li>
<li class="toctree-l3"><a class="reference internal" href="examples.running_with_hsds.html#rev-gen">reV Gen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="examples.running_with_hsds.html#windpower">windpower</a></li>
<li class="toctree-l4"><a class="reference internal" href="examples.running_with_hsds.html#pvwatts">pvwatts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="examples.running_with_hsds.html#command-line-interface-cli">Command Line Interface (CLI)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="examples.running_with_hsds.html#id3">windpower</a></li>
<li class="toctree-l4"><a class="reference internal" href="examples.running_with_hsds.html#id4">pvwatts</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reV/reV.html">reV package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reV/reV.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reV/reV.SAM.html">reV.SAM package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reV/reV.SAM.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reV/reV.batch.html">reV.batch package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reV/reV.batch.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reV/reV.config.html">reV.config package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reV/reV.config.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reV/reV.econ.html">reV.econ package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reV/reV.econ.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reV/reV.generation.html">reV.generation package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reV/reV.generation.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reV/reV.handlers.html">reV.handlers package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reV/reV.handlers.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reV/reV.offshore.html">reV.offshore package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reV/reV.offshore.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reV/reV.pipeline.html">reV.pipeline package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reV/reV.pipeline.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reV/reV.qa_qc.html">reV.qa_qc package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reV/reV.qa_qc.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reV/reV.rep_profiles.html">reV.rep_profiles package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reV/reV.rep_profiles.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reV/reV.supply_curve.html">reV.supply_curve package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reV/reV.supply_curve.html#submodules">Submodules</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reV/reV.utilities.html">reV.utilities package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reV/reV.utilities.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reV/reV.html#submodules">Submodules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reV/reV.cli.html">reV.cli module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reV/reV.cli.html#rev">reV</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reV/reV.version.html">reV.version module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">reV</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="misc.html">Installation and Usage</a> &raquo;</li>
        
      <li>Batched Execution</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/nrel/reV/blob/master/docs/source/misc/examples.batched_execution.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="batched-execution">
<h1>Batched Execution<a class="headerlink" href="#batched-execution" title="Permalink to this headline">¶</a></h1>
<p>This example set shows how reV inputs can be parameterized and the execution
can be batched.</p>
<div class="section" id="batching-config-description">
<h2>Batching Config Description<a class="headerlink" href="#batching-config-description" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>“sets” in the batch config is a list of batches.</p></li>
<li><p>Each “batch” is a dictionary containing “args” and “files”.</p></li>
<li><p>“args” are the key/value pairs from which the batching combinations will be
made. Each unique combination of args represents a job. If two args are
specified with three possible values each, nine jobs will be run.</p></li>
<li><p>The unique combinations of “args” will be replaced in all files in the
“files” list. The arg must already exist in the file for the new values to
be inserted. The replacement is done recursively.</p></li>
<li><p>Batch jobs will be assigned names based on the args. Accordingly, the name
field specification should be omitted in all configs.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="how-to-run">
<h2>How to Run<a class="headerlink" href="#how-to-run" title="Permalink to this headline">¶</a></h2>
<p>Before submitting batch jobs, it is sometimes useful to perform a “dry-run”
which will create all of the batch sub directories without submitting jobs to
SLURM:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>reV -c <span class="s2">&quot;../config_batch.json&quot;</span> batch --dry-run
</pre></div>
</div>
<p>Once you are happy with the dry-run, or if you are confident in your job setup,
you can submit all batch jobs using the following CLI call:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>reV -c <span class="s2">&quot;../config_batch.json&quot;</span> batch
</pre></div>
</div>
<p>If anything goes wrong, you can cancel all batch jobs using the command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>reV -c <span class="s2">&quot;../config_batch.json&quot;</span> batch --cancel
</pre></div>
</div>
<p>New sub directories will be created in the folder with the batch config file
for each sub job. All job files in the same directory (and sub directories) as
the batch config file will be copied into the job folders. The reV pipeline
manager will be executed in each sub directory. The above batch cli command
can be issues repeatedly to clean up the sub directory status <code class="docutils literal notranslate"><span class="pre">.jsons</span></code>,
kick off the next step in the pipeline, or to rerun failed jobs. See the reV
pipeline execution example for more details on how the pipeline works.</p>
<p>You can also have the batch module submit pipeline monitoring background
processes using the <code class="docutils literal notranslate"><span class="pre">--monitor-background</span></code> flag as shown below.</p>
<p>Please note that the stdout/stderr of the background processes will not be
captured, so it’s important to set the <code class="docutils literal notranslate"><span class="pre">log_file</span></code> argument in the pipeline
config.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>reV -c <span class="s2">&quot;../config_batch.json&quot;</span> batch --monitor-background
</pre></div>
</div>
<p>All of the batch jobs can be collected into a single file using the multi-year
collection utility. This utility is not part of the batch pipeline and needs to
be executed and configured separately. See the <code class="docutils literal notranslate"><span class="pre">config_multi-year.json</span></code> file
for details on how to setup this collection step. To execute, use the following
command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>reV -c <span class="s2">&quot;../config_multi-year.json&quot;</span> multi-year
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="examples.advanced_econ_modeling.html" class="btn btn-neutral float-right" title="SAM Single Owner Modeling" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="examples.full_pipeline_execution.html" class="btn btn-neutral float-left" title="Full Pipeline Execution" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2018, Alliance for Sustainable Energy, LLC

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>